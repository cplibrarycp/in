<!DOCTYPE html>
<html lang="ml">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>‡¥µ‡¥æ‡¥Ø‡¥® | THRIPUDI LIBRARY</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background-color: #f0f0f0; }
        .reader-container { width: 100%; height: 100%; display: flex; flex-direction: column; }
        .error-message { 
            text-align: center; 
            padding: 50px; 
            font-family: Arial, sans-serif; 
            color: #d32f2f; 
            font-size: 1.2em; 
        }
        iframe { border: none; width: 100%; height: 100%; }
    </style>
</head>
<body>

<div class="reader-container">
    <div id="content">
        </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const bookId = sessionStorage.getItem('currentBookId');
        const contentDiv = document.getElementById('content');

        if (!bookId) {
            // ‡¥™‡µÅ‡¥∏‡µç‡¥§‡¥ï‡¥Ç ‡¥µ‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡¥æ‡µª ID ‡¥≤‡¥≠‡¥ø‡¥ö‡µç‡¥ö‡¥ø‡¥≤‡µç‡¥≤‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡µΩ
            contentDiv.innerHTML = `
                <div class="error-message">
                    <h1>üìö ‡¥™‡µÅ‡¥∏‡µç‡¥§‡¥ï‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤!</h1>
                    <p>‡¥µ‡¥æ‡¥Ø‡¥® ‡¥§‡µÅ‡¥ü‡¥ô‡µç‡¥ô‡¥æ‡µª ‡¥ï‡¥¥‡¥ø‡¥û‡µç‡¥û‡¥ø‡¥≤‡µç‡¥≤. ‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥ó‡µç‡¥∞‡¥®‡µç‡¥•‡¥∂‡µá‡¥ñ‡¥∞‡¥§‡µç‡¥§‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µç <a href="collection.html">‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µÜ ‡¥™‡µã‡¥ï‡µÅ‡¥ï</a>.</p>
                </div>
            `;
            return;
        }

        // ‡¥ó‡µÇ‡¥ó‡¥ø‡µæ ‡¥°‡µç‡¥∞‡µà‡¥µ‡µç PDF Embed Link (‡¥®‡¥Æ‡µç‡¥Æ‡µæ ‡¥Æ‡µÅ‡¥®‡µç‡¥®‡µá ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡¥§‡µç)
        // ‡¥à ‡¥≤‡¥ø‡¥ô‡µç‡¥ï‡µç PDF-‡¥®‡µÜ read-only ‡¥Æ‡µã‡¥°‡¥ø‡µΩ ‡¥§‡µÅ‡¥±‡¥ï‡µç‡¥ï‡¥æ‡µª ‡¥∏‡¥π‡¥æ‡¥Ø‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥Ç.
        const embedUrl = \`https://docs.google.com/gview?url=https://drive.google.com/uc?id=\${bookId}&embedded=true\`;

        // Iframe-‡µΩ ‡¥™‡µÅ‡¥∏‡µç‡¥§‡¥ï‡¥Ç ‡¥§‡µÅ‡¥±‡¥ï‡µç‡¥ï‡µÅ‡¥®‡µç‡¥®‡µÅ
        contentDiv.innerHTML = \`<iframe src="\${embedUrl}"></iframe>\`;
    });
    
    // ‡¥á‡¥®‡¥ø, read.html-‡µΩ ‡¥®‡¥ø‡¥®‡µç‡¥®‡µç user logout ‡¥ö‡µÜ‡¥Ø‡µç‡¥§‡¥æ‡µΩ ‡¥â‡¥£‡µç‡¥ü‡¥æ‡¥ï‡¥æ‡µª ‡¥∏‡¥æ‡¥ß‡µç‡¥Ø‡¥§‡¥Ø‡µÅ‡¥≥‡µç‡¥≥ ‡¥™‡µç‡¥∞‡¥∂‡µç‡¥®‡¥ô‡µç‡¥ô‡µæ ‡¥í‡¥¥‡¥ø‡¥µ‡¥æ‡¥ï‡µç‡¥ï‡¥æ‡µª
    // ‡¥à ‡¥™‡µá‡¥ú‡µç ‡¥é‡¥™‡µç‡¥™‡µã‡¥¥‡µÅ‡¥Ç ‡¥≤‡µã‡¥ó‡¥ø‡µª ‡¥∏‡µç‡¥±‡µç‡¥±‡¥æ‡¥±‡µç‡¥±‡¥∏‡µç ‡¥ö‡µÜ‡¥ï‡µç‡¥ï‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µá‡¥£‡µç‡¥ü‡¥§‡¥ø‡¥≤‡µç‡¥≤. ‡¥ï‡¥æ‡¥∞‡¥£‡¥Ç ‡¥à ‡¥≤‡¥ø‡¥ô‡µç‡¥ï‡µç ‡¥™‡µç‡¥∞‡µà‡¥µ‡¥±‡µç‡¥±‡µç ‡¥Ü‡¥£‡µç.
    // ‡¥é‡¥ô‡µç‡¥ï‡¥ø‡¥≤‡µÅ‡¥Ç, ‡¥Æ‡µä‡¥§‡µç‡¥§‡¥§‡µç‡¥§‡¥ø‡¥≤‡µÅ‡¥≥‡µç‡¥≥ ‡¥®‡¥æ‡¥µ‡¥ø‡¥ó‡µá‡¥∑‡¥®‡µÅ‡¥µ‡µá‡¥£‡µç‡¥ü‡¥ø:
    
    // ‡¥à ‡¥™‡µá‡¥ú‡µç ‡¥§‡µÅ‡¥±‡¥®‡µç‡¥®‡¥§‡¥ø‡¥®‡µç ‡¥∂‡µá‡¥∑‡¥Ç currentBookId ‡¥∏‡µÜ‡¥∑‡µª ‡¥∏‡µç‡¥±‡µç‡¥±‡µã‡¥±‡µá‡¥ú‡¥ø‡µΩ ‡¥®‡¥ø‡¥®‡µç‡¥®‡µç ‡¥ï‡µç‡¥≤‡µÄ‡µª ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡¥§‡µç ‡¥®‡¥≤‡µç‡¥≤‡¥§‡¥æ‡¥£‡µç
    // ‡¥™‡¥ï‡µç‡¥∑‡µÜ, user ‡¥¨‡¥æ‡¥ï‡µç‡¥ï‡µç ‡¥¨‡¥ü‡µç‡¥ü‡µ∫ ‡¥Ö‡¥Æ‡µº‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥æ‡µΩ ‡¥µ‡µÄ‡¥£‡µç‡¥ü‡µÅ‡¥Ç load ‡¥Ü‡¥µ‡¥æ‡¥®‡¥æ‡¥Ø‡¥ø ‡¥á‡¥§‡µç ‡¥®‡¥ø‡¥≤‡¥®‡¥ø‡µº‡¥§‡µç‡¥§‡µÅ‡¥®‡µç‡¥®‡µÅ.
</script>

</body>
</html>
